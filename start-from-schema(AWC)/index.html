<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Popoto.js Two Customers Example</title>
    <link rel="stylesheet" href="https://unpkg.com/popoto/dist/popoto.min.css">
    <style>
        .graph-container {
            height: 600px;
            border: 1px solid #ccc;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div id="popoto-graph1" class="graph-container"></div>
    <div id="popoto-graph2" class="graph-container"></div>

    <script src="https://unpkg.com/d3@5.16.0/dist/d3.min.js"></script>
    <script src="https://unpkg.com/popoto"></script>
    <script src="https://unpkg.com/neo4j-driver"></script>
    <script>
        // Configure Neo4j database connection with your credentials
        const driver = neo4j.driver(
            "neo4j+s://129a21a6.databases.neo4j.io",
            neo4j.auth.basic("neo4j", "qUfVdrdlih4_lNEGzbaBTXoVYDN5jqBB7OmcaV_o2OU")
        );

        function initializeGraph(containerId, label, value) {
            const instance = {...popoto};  // Create a new instance of Popoto.js

            instance.graph.containerId = containerId;
            instance.runner.DRIVER = driver;

            instance.provider.node.Provider = {
                "Customer": {
                    "returnAttributes": ["BillToName", "AccountCode"],
                    "constraintAttribute": "BillToName"
                }
            };

            instance.start(label);
            setTimeout(() => {
                instance.graph.addSchema({label, value});
            }, 1000);
        }

        driver.verifyConnectivity().then(() => {
            initializeGraph("popoto-graph1", "Customer", {BillToName: "Electro-Tech (1ELHUHO)"});
            initializeGraph("popoto-graph2", "Customer", {BillToName: "Evolution (1EVWSHO)"});
        }).catch((error) => {
            console.error('Neo4j driver connection error:', error);
            alert('Failed to connect to Neo4j. Please check the console for more details.');
        });
    </script>
</body>
</html>
